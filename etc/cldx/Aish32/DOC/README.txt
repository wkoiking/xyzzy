
	     UNIX / X680x0 Human68k バイナリテキストコンバータ

		       ish/uuencode 対応 aish v1.12
								小笠原博之

  X680x0 用の ish/uuencode 変換プログラムである aish を UNIX 上でも動くよう
にしたものです。ish, uuencode 共に区別なく扱え、また ish でもある程度長いファ
イル名を扱えるという特徴を持っています。というのも、ish はもともと MS-DOS 上
のものであったために、ヘッダに含むことのできるファイル名が短く、8文字 + 拡張
子3文字 で切られてしまうからです。このプログラムではコメント行から元のファイ
ル名を推定して補完します。詳しくは aish.doc を参照して下さい。ish のマルチボ
リューム形式のエンコードもできます。

(注意: *.doc のファイルは漢字コードが SJIS になっています)

● ish とは？

  パソコン通信等でバイナリファイル転送するために石塚匡哉氏によって考え出され
たもので、任意のファイルをテキストファイルに変換することができます。UNIX でよ
く用いられる uuencode/uudecode と目的は同じです。ish の特徴はエラー判定ができ
ること、ちょっとしたエラーなら自己修復すること、8bit 変換も可能で効率が良いこ
と、分割が可能で自動結合ができること、等があります。



● UNIX 版 install 方法

  通常はそのまま make だけで OK です。その後必要なら Makefile 内の DSTDIR (イ
ンストール先ディレクトリ) を修正し、make install して下さい。install コマンド
がない、もしくは使い方が違うと怒られる場合は make installc で試して下さい。

  使い方は aish.doc を参照して下さい。ただしこのドキュメントは、X680x0 版をバ
イナリ配布する場合のものと共通になっています。

  もし make していて overwrite of file ... もしくは ai_crcmv.o が見つからない
というようなコンパイルエラーが出て止まってしまったら、一旦 make clean した後
 make oldc と実行して下さい。



● install 時の修正

  install はできたものの ish のタイムスタンプの復元がうまく行かない時は以下
のように修正を加えてみて下さい。


  ・HP9000 HP-UX
	一度 make syschk.h と実行した後、syschk.h の２行目を「#define SYSV」
	に修正してから make を行って下さい。

  開発は NEWS-OS 4.2、SunOS 4.1.1 および Human68k v2.02/v3.02 上で行いました。
これらの機種では修正は必要ありません。


  また、autodecode の install 時に perl が見つからないと怒られますが、perl
が install されてないのであればこの部分は無視して構いません。autodecode はあ
るとたいへん便利ですが、なくても aish の動作に影響を与えるものではありません
ので。(autodecode は aish を使ってネットニュースやメール等のバイナリを、自動
ソートして展開してくれるコマンドです -> 後述)



● X68K でのコンパイル

  付属ソースは、Makefile の指定箇所の変更で ALL-C バージョンとして X68K でコ
ンパイルすることができます。確認したライブラリは XC ですが、libc でもまず問題
なくコンパイルできるものと思われます。ただし ALL-C バージョンでは標準入出力の
再オープンまではしていませんので、バイナリを通さないようにして下さい。

  コンパイルするには、gcc, has, hlk などそれなりの開発環境がそろっていなけれ
ばなりません。再コンパイルを保証するものでもありません。



● ishcat コマンド

	ishcat [-{7|8|s|n|u}] [file ..]

 ishcat は aish を呼び出すシェルスクリプトであり、バイナリファイルをテキスト
変換して標準出力に出力するコマンドです。デフォルトで ish jis7 モードで変換し
ます。-s, -7, -8, -n, -u スイッチで出力フォーマットを指定できます。

  スイッチもファイル名も指定せず、引数なしで ishcat を実行した場合は、標準入
力から読み込んだ ish テキストをデコードします。このとき不要な入力行のエコー
バックはせず、展開ファイル名のみ表示します。


・使用例その１, ish を使ったファイル転送  WS -> パソコン

	パソコンから RS232C を使って WS へログインしている状態で、バイナリ
	ファイルをパソコンに転送したい場合 (ダウンロード)

		パソコン側でログファイル保存状態にしてから

		% ishcat バイナリファイル

		のように実行。転送が終わったら、あとでパソコンのログファイル
		を ish デコードする。


・使用例その２, ish を使ったファイル転送  パソコン -> WS

	パソコンから RS232C を使って WS へログインしている状態で、バイナリ
	ファイルをパソコンから WS に転送したい場合 (アップロード)

		WS 側で

		% ishcat

		と実行する。パソコン側でバイナリファイルを ish 変換したものを
		用意し、テキスト送信機能を使ってアップロードを行う。送信が終
		わったら CTRL+D を押す。


パソコン側で、もしあるならリアルタイム ish エンコーダ/デコーダを併用すると便
利です。(X68K の場合は Ko-Window の koishenc が便利です)



●リアルタイム ish デコード技 (UNIX用)

	rlogin HOST | tee /dev/tty | aish -

  こんな感じでリモートマシンにアクセスすると、ish ファイルを画面に表示するだ
けで勝手にデコード & ファイル展開してくれます。(コマンドは別に rlogin に限ら
ない) 例えばインターネットで入れる BBS にアクセスしたり(でんでんネットなど)、
 tip で ish 転送しかサポートしていない BBS にアクセスする場合この技を応用する
と大変便利です。(技提供 DEN0111 Agama)



●自動デコーダ autodecode (UNIX/Human用)

  autodecode は、ネットニュースで流れているプログラムを、勝手に展開してくれる
便利なプログラムです。分割されているものは勝手に並べ変え、不要部分を編集する
必要もありません。aish と一緒に是非使ってみて下さい。詳しくは autodecode.doc
を参照して下さい。


--
小笠原博之 oga@dgw.yz.yamagata-u.ac.jp
   SPS-NET: SPS0783 COR.
DenDen-NET: DEN0006 COR. ( telnet bbs.yamagata-u.ac.jp , login:den )

